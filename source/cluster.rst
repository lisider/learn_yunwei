从服务器开始
-------------

服务器坐落在网络中,提供一个域名供有权限的人访问

如果同时访问的人太多,单点的服务器由于资源限制,很难 支撑高强度的流量
另外,如果单点除了问题,那么服务将会挂掉

所以要解决这个问题,必须借助 很多台 机子 来一起处理请求,很多台机子就被称为集群

集群
-------------
功能分类

要做好集群,关键是负载均衡及高可用

负载均衡是为了防止某台服务器过载,从而宕机
高可用 是 一种评估方法, 意思就是 一个集群的稳定性有多少



实现分类

服务器集群在物理环境和虚拟化环境下都可以搭建
目前的整体解决方案分为硬件和软件两种
硬件有
     F5 的GIP-IP
     RadWare 的 AppDirector
     梭子鱼的负载均衡设备

实现负载均衡的软件有 
     LVS 
     Nginx 
     HAProxy

实现高可用的软件有
     keepalived 会自动切换LVS设备. 一般结合 LVS用

实现优化的软件有
     Squid

但是注意 ,使用 Nginx 不一定是为了 做集群

我估计软件的实现里面 依赖了 某些 虚拟化技术

LVS
---------

LVS在内核里面,工作模式有三种,可以任选一种工作
1/
     NAT模式
     一个机器上有两个网卡,功能为做一个NAT转换,作为一个局域网的出口服务器,如果该机器的外网ip 为 A ,那么 这个集群的对外ip 就是A
     至于请求交给后端的哪个服务器,看LVS的核心技术(调度算法) ,另外回复要交回 客户端,这里面有个hash表来维护请求,回复关系

2/
     TUN模式

3/
     DR模式

LVS调度算法
-------------

如何部署LVS服务
----------------

内核为核心算法
存在形式为 内核模块 ,名称为 ip_vs
应用层为ipvsadm工具



HAProxy
-------
怎么实现保持会话
用hash保存ip
用cookie
用服务器的 Session 及 服务器标识

Nginx
------

可以做后盾HTTP 服务器,也可以做 反向代理服务器

怎么调用后端
轮询
IP哈希
URL哈希

MySQL
-------

使用MySQL 复制功能 可以将主服务器上的数据复制到多台机子上



     

